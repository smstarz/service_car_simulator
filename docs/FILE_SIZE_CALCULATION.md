# Simulation Result íŒŒì¼ í¬ê¸° ê³„ì‚°

## ğŸ“Š ì‹œë‚˜ë¦¬ì˜¤ ì„¤ì •

- **ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„**: 12ì‹œê°„ (43,200ì´ˆ)
- **ì°¨ëŸ‰ ìˆ˜**: 20ëŒ€
- **ìˆ˜ìš” ê±´ìˆ˜**: 400ê±´
- **ìœ„ì¹˜ ì €ì¥ ì£¼ê¸°**: 1ì´ˆë§ˆë‹¤

---

## ğŸ”¢ ìƒì„¸ ê³„ì‚°

### 1. Metadata & Configuration (~2 KB)

```json
{
  "metadata": { /* ~500 bytes */ },
  "configuration": { /* ~500 bytes */ },
  "statistics": { /* ~1000 bytes */ }
}
```

**ì˜ˆìƒ í¬ê¸°**: 2 KB

---

### 2. Vehicles ë°°ì—´

#### 2.1 Vehicle ê¸°ë³¸ ì •ë³´ (ì°¨ëŸ‰ë‹¹)

```json
{
  "id": "vehicle_001",
  "name": "Vehicle_1",
  "initialLocation": [126.9780, 37.5665],
  "job_type": "call",
  "capacity": 4,
  "statistics": {
    "total_jobs": 20,
    "total_distance": 50000,
    "total_service_time": 18000,
    "idle_time": 14400,
    "moving_time": 10800,
    "working_time": 18000
  }
}
```

**JSON ë¬¸ìì—´ í¬ê¸°**: ~300 bytes
**20ëŒ€ ì°¨ëŸ‰**: 300 Ã— 20 = **6,000 bytes = 6 KB**

#### 2.2 Vehicle Timeline (1ì´ˆë§ˆë‹¤ ìœ„ì¹˜ ì €ì¥)

##### ì „ëµ B: 1ì´ˆë§ˆë‹¤ ìœ„ì¹˜ ì €ì¥í•˜ëŠ” ê²½ìš°

**ê° ìœ„ì¹˜ ì—”íŠ¸ë¦¬**:
```json
{
  "timestamp": 25200,
  "type": "position_update",
  "state": "moving",
  "location": [126.9780, 37.5665],
  "demandId": "demand_001",
  "routeId": "route_001"
}
```

**JSON ë¬¸ìì—´ í¬ê¸°**: ~150 bytes (ì••ì¶•ë˜ì§€ ì•Šì€ ìƒíƒœ)

**ì°¨ëŸ‰ 1ëŒ€ë‹¹**:
- ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„: 43,200ì´ˆ
- ì—”íŠ¸ë¦¬ ê°œìˆ˜: 43,200ê°œ
- í¬ê¸°: 43,200 Ã— 150 bytes = **6,480,000 bytes = 6.48 MB**

**20ëŒ€ ì°¨ëŸ‰**:
- 6.48 MB Ã— 20 = **129.6 MB**

---

### 3. Routes ë°°ì—´

#### 3.1 Route ìˆ˜ ì¶”ì •

- ìˆ˜ìš” 400ê±´ â†’ ì°¨ëŸ‰ì´ ìˆ˜ìš”ë¡œ ì´ë™í•˜ëŠ” ê²½ë¡œ 400ê°œ
- ì°¨ëŸ‰ë‹¹ í‰ê· : 400 / 20 = 20ê±´

#### 3.2 Route 1ê°œë‹¹ í¬ê¸°

```json
{
  "id": "route_001",
  "vehicleId": "vehicle_001",
  "demandId": "demand_001",
  "type": "to_demand",
  "startTime": 25450,
  "endTime": 25750,
  "duration": 300,
  "distance": 450,
  "startLocation": [126.9780, 37.5665],
  "endLocation": [126.9844, 37.5665],
  "segments": [
    {
      "index": 0,
      "name": "ì‚¼ì¼ëŒ€ë¡œ13ê¸¸",
      "startTime": 25450,
      "endTime": 25476,
      "duration": 26,
      "distance": 74,
      "coordinates": [
        [126.9849, 37.5668],
        [126.9857, 37.5668]
      ]
    }
    // í‰ê·  10ê°œ ì„¸ê·¸ë¨¼íŠ¸
  ],
  "geometry": {
    "type": "LineString",
    "coordinates": [
      // í‰ê·  50ê°œ ì¢Œí‘œ
    ]
  }
}
```

**êµ¬ì„± ìš”ì†Œ**:
- ê¸°ë³¸ ì •ë³´: ~200 bytes
- Segments (10ê°œ í‰ê· ): 
  - ì„¸ê·¸ë¨¼íŠ¸ë‹¹: ~200 bytes
  - 10ê°œ: 2,000 bytes
- Geometry (ì¢Œí‘œ 50ê°œ):
  - ì¢Œí‘œë‹¹: 25 bytes `[126.9780, 37.5665]`
  - 50ê°œ: 1,250 bytes

**Route 1ê°œ**: 200 + 2,000 + 1,250 = **3,450 bytes = 3.45 KB**

**400ê°œ Route**: 3.45 KB Ã— 400 = **1,380 KB = 1.38 MB**

---

### 4. Demands ë°°ì—´

#### 4.1 Demand 1ê±´ë‹¹ í¬ê¸°

```json
{
  "id": "demand_001",
  "timestamp": 25400,
  "requestTime": "07:03:20",
  "location": [126.9844, 37.5665],
  "address": "ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì‚¼ì¼ëŒ€ë¡œ13ê¸¸",
  "job_type": "call",
  "status": "completed",
  "assignedVehicle": "vehicle_001",
  "dispatchInfo": {
    "dispatchTime": 25450,
    "waitTime": 50,
    "isochrone": {
      "waitTimeLimit": 11,
      "polygon": {
        "type": "Polygon",
        "coordinates": [[
          // í‰ê·  20ê°œ ì¢Œí‘œ
        ]]
      }
    },
    "candidateVehicles": ["vehicle_001", "vehicle_002"],
    "selectedReason": "closest_distance",
    "distanceToVehicle": 0.45
  },
  "timeline": {
    "requested": 25400,
    "dispatched": 25450,
    "arrived": 25750,
    "workStarted": 25750,
    "workCompleted": 26650
  },
  "metrics": {
    "waitTime": 350,
    "serviceTime": 900,
    "totalTime": 1250
  }
}
```

**êµ¬ì„± ìš”ì†Œ**:
- ê¸°ë³¸ ì •ë³´: ~300 bytes
- Isochrone polygon (20ê°œ ì¢Œí‘œ): 500 bytes
- Timeline & Metrics: ~200 bytes

**Demand 1ê±´**: 300 + 500 + 200 = **1,000 bytes = 1 KB**

**400ê±´**: 1 KB Ã— 400 = **400 KB = 0.4 MB**

---

### 5. Events ë°°ì—´ (Global Timeline)

#### 5.1 ì´ë²¤íŠ¸ ìˆ˜ ì¶”ì •

- ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘/ì¢…ë£Œ: 2ê°œ
- ìˆ˜ìš”ë³„ ì´ë²¤íŠ¸ (ë°œìƒ, ë°°ì°¨, ë„ì°©, ì‘ì—…ì‹œì‘, ì‘ì—…ì™„ë£Œ): 5 Ã— 400 = 2,000ê°œ
- **ì´ ì´ë²¤íŠ¸**: ~2,000ê°œ

#### 5.2 ì´ë²¤íŠ¸ 1ê°œë‹¹ í¬ê¸°

```json
{
  "timestamp": 25450,
  "type": "vehicle_dispatched",
  "vehicleId": "vehicle_001",
  "demandId": "demand_001",
  "location": [126.9780, 37.5665]
}
```

**Event 1ê°œ**: ~120 bytes

**2,000ê°œ Event**: 120 Ã— 2,000 = **240,000 bytes = 240 KB = 0.24 MB**

---

## ğŸ“¦ ì´ íŒŒì¼ í¬ê¸° ê³„ì‚°

### ì „ëµ B: 1ì´ˆë§ˆë‹¤ ìœ„ì¹˜ ì €ì¥

| í•­ëª© | í¬ê¸° |
|-----|------|
| Metadata & Configuration | 2 KB |
| Vehicles (ê¸°ë³¸ ì •ë³´) | 6 KB |
| **Vehicles Timeline (1ì´ˆë§ˆë‹¤)** | **129.6 MB** |
| Routes (400ê±´) | 1.38 MB |
| Demands (400ê±´) | 0.4 MB |
| Events (2,000ê°œ) | 0.24 MB |
| **ì´ê³„** | **~131.6 MB** |

---

## ğŸ¯ ì €ì¥ ì „ëµ ë¹„êµ

### ì „ëµ A: ì´ë²¤íŠ¸ë§Œ ì €ì¥ (ê¶Œì¥)

Timelineì— ì£¼ìš” ì´ë²¤íŠ¸ë§Œ ì €ì¥ (ë°°ì°¨, ë„ì°©, ì™„ë£Œ):
- ì°¨ëŸ‰ë‹¹ í‰ê·  20ê±´ ìˆ˜ìš” ì²˜ë¦¬
- ìˆ˜ìš”ë‹¹ ì´ë²¤íŠ¸ 4ê°œ (ë°°ì°¨, ë„ì°©, ì‘ì—…ì‹œì‘, ì™„ë£Œ)
- ì°¨ëŸ‰ë‹¹ ì´ë²¤íŠ¸: 20 Ã— 4 = 80ê°œ
- 20ëŒ€ ì°¨ëŸ‰: 80 Ã— 20 = 1,600ê°œ

**Timeline í¬ê¸°**: 1,600 Ã— 150 bytes = **240 KB = 0.24 MB**

| í•­ëª© | í¬ê¸° |
|-----|------|
| Metadata & Configuration | 2 KB |
| Vehicles (ê¸°ë³¸ ì •ë³´) | 6 KB |
| **Vehicles Timeline (ì´ë²¤íŠ¸ë§Œ)** | **0.24 MB** |
| Routes (400ê±´) | 1.38 MB |
| Demands (400ê±´) | 0.4 MB |
| Events (2,000ê°œ) | 0.24 MB |
| **ì´ê³„** | **~2.3 MB** |

---

### ì „ëµ B: 1ì´ˆë§ˆë‹¤ ìœ„ì¹˜ ì €ì¥

| í•­ëª© | í¬ê¸° |
|-----|------|
| **ì´ê³„** | **~131.6 MB** |

---

## ğŸ“Š ë¹„êµ ë¶„ì„

| í•­ëª© | ì „ëµ A (ì´ë²¤íŠ¸ë§Œ) | ì „ëµ B (1ì´ˆë§ˆë‹¤) | ë¹„ìœ¨ |
|-----|----------------|----------------|------|
| íŒŒì¼ í¬ê¸° | **2.3 MB** | **131.6 MB** | **57ë°°** |
| ì €ì¥ ì‹œê°„ | ë¹ ë¦„ | ëŠë¦¼ | - |
| ì¬ìƒ ê³„ì‚° | í•„ìš” (ë³´ê°„) | ë¶ˆí•„ìš” | - |
| ì¬ìƒ ì†ë„ | ë§¤ìš° ë¹ ë¦„ | ë¹ ë¦„ | - |
| ë©”ëª¨ë¦¬ ì‚¬ìš© | ë‚®ìŒ | ë†’ìŒ | - |

---

## ğŸ’¡ ìµœì í™” ë°©ì•ˆ

### 1. Gzip ì••ì¶•

JSONì€ ì••ì¶•ë¥ ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤ (í…ìŠ¤íŠ¸ ë°ì´í„° + ë°˜ë³µ íŒ¨í„´):

- **ì••ì¶•ë¥ **: ì¼ë°˜ì ìœ¼ë¡œ 70~80% ì••ì¶•
- **ì „ëµ A**: 2.3 MB â†’ **0.5~0.7 MB**
- **ì „ëµ B**: 131.6 MB â†’ **26~40 MB**

### 2. ìŠ¤íŒŒìŠ¤ ìƒ˜í”Œë§ (Sparse Sampling)

ì´ë™ ì¤‘ì¸ ì°¨ëŸ‰ë§Œ ê¸°ë¡:
- IDLE ìƒíƒœ: ìœ„ì¹˜ ì €ì¥ ì•ˆ í•¨
- MOVING ìƒíƒœ: 1ì´ˆë§ˆë‹¤ ì €ì¥
- WORKING ìƒíƒœ: ìœ„ì¹˜ ì €ì¥ ì•ˆ í•¨

**ì˜ˆìƒ ì ˆê°**:
- ì°¨ëŸ‰ ê°€ë™ë¥  60% ê°€ì •
- ê°€ë™ ì‹œê°„ì˜ 50%ê°€ ì´ë™ (ë‚˜ë¨¸ì§€ 50%ëŠ” ì‘ì—…)
- ì‹¤ì œ ì €ì¥: 43,200ì´ˆ Ã— 0.6 Ã— 0.5 = 12,960ì´ˆ
- **íŒŒì¼ í¬ê¸°**: 131.6 MB Ã— 0.3 = **39.5 MB**

### 3. í˜¼í•© ì „ëµ (Hybrid)

- **ì£¼ìš” ì´ë²¤íŠ¸**: ëª¨ë‘ ì €ì¥
- **ì´ë™ ì¤‘ ìœ„ì¹˜**: 5ì´ˆë§ˆë‹¤ ì €ì¥
- **IDLE/WORKING**: ìœ„ì¹˜ ì €ì¥ ì•ˆ í•¨

**ì˜ˆìƒ í¬ê¸°**:
- Timeline: 12,960ì´ˆ / 5 = 2,592ê°œ ì—”íŠ¸ë¦¬
- 2,592 Ã— 150 bytes Ã— 20ëŒ€ = **7.8 MB**
- ì „ì²´: 2 KB + 6 KB + 7.8 MB + 1.38 MB + 0.4 MB + 0.24 MB = **~9.8 MB**
- Gzip ì••ì¶• í›„: **~2~3 MB**

---

## ğŸ¯ ê¶Œì¥ ì‚¬í•­

### 12ì‹œê°„, ì°¨ëŸ‰ 20ëŒ€, ìˆ˜ìš” 400ê±´ ì‹œë‚˜ë¦¬ì˜¤

| ì „ëµ | ì›ë³¸ í¬ê¸° | ì••ì¶• í›„ | ì¬ìƒ í’ˆì§ˆ | ê¶Œì¥ë„ |
|-----|---------|--------|---------|-------|
| **ì „ëµ A (ì´ë²¤íŠ¸ë§Œ)** | 2.3 MB | 0.5 MB | ë§¤ìš° ì¢‹ìŒ | â­â­â­â­â­ |
| **í˜¼í•© (5ì´ˆë§ˆë‹¤)** | 9.8 MB | 2~3 MB | ë§¤ìš° ì¢‹ìŒ | â­â­â­â­ |
| **ì „ëµ B (1ì´ˆë§ˆë‹¤)** | 131.6 MB | 26~40 MB | ì™„ë²½ | â­â­ |

### ìµœì¢… ê¶Œì¥: **ì „ëµ A (ì´ë²¤íŠ¸ë§Œ ì €ì¥)**

**ì´ìœ **:
1. íŒŒì¼ í¬ê¸°: ì••ì¶• í›„ **0.5 MB** (ë§¤ìš° ì‘ìŒ)
2. Route segments ì •ë³´ë¡œ ì •í™•í•œ ë³´ê°„ ê°€ëŠ¥
3. ì¬ìƒ ì†ë„ ì¡°ì ˆ ìš©ì´
4. ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
5. ë¸Œë¼ìš°ì €ì—ì„œ ì²˜ë¦¬ ê°€ëŠ¥

**ì¬ìƒ ì‹œ**:
- Route segmentsë¥¼ ì‚¬ìš©í•œ ì‹¤ì‹œê°„ ë³´ê°„
- 60fps ì¬ìƒ ì‹œì—ë„ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜
- ë¹¨ë¦¬ê°ê¸°/ë˜ê°ê¸° ì‰¬ì›€

---

## ğŸ’» êµ¬í˜„ ì½”ë“œ ì˜ˆì œ

```javascript
// ì „ëµ A: ì´ë²¤íŠ¸ë§Œ ì €ì¥
class EventRecorder {
  recordVehicleEvent(vehicle, type, additionalData = {}) {
    const event = {
      timestamp: this.currentTime,
      type: type,
      state: vehicle.state,
      location: vehicle.location,
      ...additionalData
    };
    
    vehicle.timeline.push(event);
  }
}

// ì¬ìƒ ì‹œ ë³´ê°„
class SimulationReplay {
  interpolatePosition(vehicle, currentTime) {
    const timeline = vehicle.timeline;
    
    // í˜„ì¬ ì‹œê°„ì— í•´ë‹¹í•˜ëŠ” ì´ë²¤íŠ¸ ì°¾ê¸°
    for (let i = 0; i < timeline.length - 1; i++) {
      const event = timeline[i];
      const nextEvent = timeline[i + 1];
      
      if (currentTime >= event.timestamp && currentTime < nextEvent.timestamp) {
        if (event.state === 'moving' && event.routeId) {
          // Route segmentsë¡œ ë³´ê°„
          const route = this.routes.find(r => r.id === event.routeId);
          return this.interpolateAlongRoute(route, currentTime);
        }
        return event.location; // IDLE or WORKING
      }
    }
  }
}
```

---

## ê²°ë¡ 

**12ì‹œê°„, ì°¨ëŸ‰ 20ëŒ€, ìˆ˜ìš” 400ê±´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ:**

- **1ì´ˆë§ˆë‹¤ ìœ„ì¹˜ ì €ì¥ ì‹œ**: ì›ë³¸ **131.6 MB**, ì••ì¶• **26~40 MB**
- **ì´ë²¤íŠ¸ë§Œ ì €ì¥ ì‹œ** (ê¶Œì¥): ì›ë³¸ **2.3 MB**, ì••ì¶• **0.5 MB**

**íŒŒì¼ í¬ê¸° ì°¨ì´**: **57ë°°** (ì••ì¶• ê¸°ì¤€ 52~80ë°°)

â†’ **ì „ëµ A (ì´ë²¤íŠ¸ë§Œ ì €ì¥ + ì¬ìƒ ì‹œ ë³´ê°„)**ë¥¼ ê°•ë ¥ ê¶Œì¥í•©ë‹ˆë‹¤!
